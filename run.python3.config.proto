# Run a single jailed process per request
mode: ONCE

# Limit runtime to 5 seconds
time_limit: 5

# Jail hostname
hostname: "sandbox"

# Working directory inside jail
cwd: "/app"

# Use Python inside the container
exec_bin {
  path: "/usr/bin/python3"
}

# Mount Python and system libraries as read-only
mount {
  src: "/usr"
  dst: "/usr"
  is_bind: true
  rw: false
}
mount {
  src: "/lib"
  dst: "/lib"
  is_bind: true
  rw: false
}
mount {
  src: "/lib64"
  dst: "/lib64"
  is_bind: true
  rw: false
}
mount {
  src: "/bin"
  dst: "/bin"
  is_bind: true
  rw: false
}

# Mount your application code as read/write
mount {
  src: "/app"
  dst: "/app"
  is_bind: true
  rw: true
}

# Allow temp files inside jail
mount {
  src: "/tmp"
  dst: "/tmp"
  is_bind: true
  rw: true
}

clone_newuser: false
clone_newnet: false
clone_newpid: false
clone_newipc: false
clone_newuts: false
clone_newns: false
clone_newcgroup: false

# Resource limits
rlimit_as: 512        # Memory limit (MB)
rlimit_nproc: 10      # Max number of processes
rlimit_fsize: 10      # Max file size (MB)